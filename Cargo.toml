[package]
edition = "2024"
name = "om-syrinx"
version = "0.4.3"

[lib]
crate-type = ["cdylib"]

[dependencies]
# Default enable napi4 feature, see https://nodejs.org/api/n-api.html#node-api-version-matrix
napi = { version = "=2.16.17", default-features = false }
napi-derive = "=2.16.13"

jpreprocess = "=0.12.0"
jbonsai = "=0.2.2"
audiopus = "=0.3.0-rc.0"
serde_json = "=1.0.141"
thiserror = "=2.0.12"

# https://github.com/Lakelezz/audiopus_sys/pull/23
[patch.crates-io.audiopus_sys]
git = "https://github.com/sevenc-nanashi/audiopus_sys"
rev = "00e9d168493710193ee133bc7fbb50715a1f6e61" # sevenc-nanashi:chore/update-opus

[build-dependencies]
napi-build = "=2.2.2"
cargo-lock = "=10.1.0"

[profile.release]
lto = true
strip = "symbols"
